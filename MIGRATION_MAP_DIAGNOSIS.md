# 迁徙地图诊断指南

## 如果迁徙地图不显示，请按以下步骤排查：

### 第一步：清除缓存并重新启动
```bash
# 1. 停止开发服务器 (Ctrl+C)
# 2. 清除缓存
rm -rf node_modules/.vite

# 3. 重新启动
npm run dev
```

### 第二步：检查浏览器控制台
1. 打开浏览器开发者工具 (F12)
2. 切换到 "Console" 标签
3. 查看是否有错误信息
4. 特别注意：
   - CORS 错误（跨域问题）
   - 网络错误（ECharts 地图 JSON 加载失败）
   - JavaScript 错误

### 第三步：检查网络请求
1. 打开浏览器开发者工具 (F12)
2. 切换到 "Network" 标签
3. 刷新页面
4. 查找 `world.json` 请求
5. 确保状态码是 200（成功）

### 第四步：检查地图容器
1. 打开浏览器开发者工具 (F12)
2. 切换到 "Elements" 标签
3. 查找 `<div ref={chartRef}>` 元素
4. 确保它有正确的尺寸（width 和 height）

## 迁徙地图代码检查清单

- ✅ MigrationMap 组件存在
- ✅ chartRef 正确定义
- ✅ ECharts 初始化逻辑完整
- ✅ 地图 JSON 加载逻辑正确
- ✅ 路线数据完整
- ✅ 节点数据完整
- ✅ useEffect 依赖正确

## 如果问题仍未解决

请提供以下信息：
1. 浏览器控制台的错误信息
2. Network 标签中 world.json 的状态
3. 迁徙地图部分是否完全不显示，还是显示但没有内容

## 快速修复

如果是网络问题，可以尝试使用本地地图文件：

```javascript
// 将地图 JSON 下载到本地
// 然后修改加载路径
fetch('/maps/world.json')
```

---

**诊断日期：** 2026-02-24  
**问题：** 迁徙地图不显示  
**状态：** 代码完整，需要浏览器诊断
